{% extends 'layouts/partiels/base.html.twig' %}

{% block title 'Blog'  %}

{% block body %}
        {% if post is defined and post is not null %}
                <h1>{{ post.titre }}</h1>
                <h5 class="text-muted">
                        Publi√© le <time datetime="{{ post.publishedAt|date('Y-m-d H:i') }} ">
                                {{ post.publishedAt|date }}
                        </time>
                        par  {{ post.author }}
                </h5>
                <p>{{ post.contenu|nl2br }}</p>
        {% endif %}

        <a href="{{ path('app_post_share', {id: post.id, slug: post.slug }) }}">Partage ce article</a>
        <hr>

        <section>
              <h2>{{ comments|length }} commentaires</h2>
            {# loop.index => permet de voir l'index > loop.index is odd ? > est ce que l'index est impaire #}
                {% for comment in comments %}
                        <article class="{{ loop.index is odd ? 'bg-light' }} px-2 py-4 rounded">
                            <h3 class="fs-6 text-muted">
                                    Commente#{{loop.index }}~ par  <a href="mailto:{{ comment.email }}">{{ comment.name }}</a>
                                    {{ comment.createdAt|date }}
                            </h3>
                                <p>
                                        {{ comment.contenu|nl2br }}
                                </p>
                        </article>
                    {% else %}
                    <p>Pas de commentaire</p>
                {% endfor %}
        </section>
        <section class="mt-5">
            <div class="row">
                <div class="col-md-8">
                    {{ form_start(commentForm) }}
                        {{ form_widget(commentForm) }}
                        <button type="submit" class="btn btn-primary w-100">Commentaire</button>
                    {{ form_end(commentForm) }}
                </div>
            </div>
        </section>
{% endblock %}